## ES监控

	ES监控分5个模块: 集群健康和节点可用性、主机级别的系统和网络指标、JVM内存和垃圾回收、搜索和索引性能、资源饱和度 

### 1、索引性能监控 ###
	索引类似传统DB的write请求，包括文档的新建、删除、修改。
	索引操作都会导致每个分片refresh、flush(刷磁盘)操作
- 索引延时
- 当前索引请求量
- 索引flush延时

### 2、查询性能监控 ###

- 查询延时
- 当前查询请求量
- fetch延时，查询的第二阶段

### 3、JVM监控 ###
	
- 堆内存使用量，超过分配内存的75%，就会触发GC
- 年老代GC频率及每次GC时间
	
### 4、节点主机性能监控 ###

- 磁盘空间：当磁盘空间不够时，无法写入任何数据。
- IO使用率：当创建、查询、合并段文件时，ES会大量读写磁盘
- CPU使用率
- 网络流量监控
- 文件描述符

### 5、集群健康和节点可用监控 ###

- 集群状态：如果集群状态为yellow，则说明至少丢失一个备份分片, 这种状态下，搜索结果仍是完整的。若为red，则至少丢失一个主分片，则搜索结果会丢失部分数据
- 初始化和未分配数量, 创建index时，或节点重启时，节点会被设为初始化状态，然后master节点会集群中的节点分配分片，然后分片进入started状态或unassigned状态

### 6、资源饱和度和错误监控 ###

- 线程池队列数和拒绝数，重点监控：search、index、merge、bulk队列数和拒绝数



