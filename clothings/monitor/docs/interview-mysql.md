
# Mysql知识梳理 #

- 数据库基本设计规范
	*  所有表必须使用Innodb引擎
	* 数据库和表必须使用UTF8
	* 尽量控制单表数据量，尽量在500万以内
	* 谨慎使用MYSQL分区
	* 尽量做到冷热数据分离，减小数据宽度
	* 禁止在表中建立预留字段
	* 禁止在数据库中存储图片或文件的二进制数据
	* 禁止在线上做数据库压力测试
	* 禁止在开发环境，生产环境直接连生产数据库
	
- 数据库字段设计规范	
	* 优先选用符合存储数据的最小数据类型
	* 避免使用TEXT,BLOG类型
	* 避免使用ENUM类型
	* 尽可能把所有列定义为 NOT NULL
	* 使用TIMESTAMP(4个字节)和DATETIME(8个字节)存储时间
	* 同财务类相关的数据必须使用Decimal

- 索引设计规范	
	* 限制每张表索引数量，单表索引数量不超过5个
	* 常见索引列的建议
	* 如何选择索引列的顺序
	* 避免建立冗余索引和重复索引
	
## 索引设计规范  ##

### 常见索引列的建议  ##

- 出现在select、update、delete语句中where条件
- 包含在 order by, group by和Distinct字段
- 多表join的关联列
 
###　如何选择索引列的顺序  ###

	索引建立的目的是：希望通过索引进行数据查找，减少IO，索引能过滤出越少的数据，从磁盘读入的数据也就越少。
	
- 区分度最高的放在联合索引最左处
- 尽量把字段长度小的放在联合索引最左侧，(因为字段长度越小，一页存储的数据量就越大)
- 使用最频繁的列放在最左侧
	
### 避免建立冗余索引和重复索引  ###
	
	这样会增加查询优化器生成执行计划的时间。

- 重复索引实例：primary key(id), index(id), unique(id)
- 冗余索引实例：index(a,b,c), index(a,b), index(a)	




